-- This script tests our core driver.

-- Complex ops.
z1 = complex.new(1,2)
z2 = complex.new(3,4)
print(z1)
print(2*z1)
print(z1+z2)
print(z1-z2)
print(z1-z2/3)
print(z1.real)
print(z1.imag)
print(complex.abs(z1))
print(complex.conj(z2))

-- Point ops.
p = point.new(1,2,3)
print(p)

-- Vector ops.
v1 = vector.new(1,2,3)
v2 = vector.new(4,5,6)
print(v1)
print(2*v2)
print(v1+v2)
print(v2-v1)

-- Tensor ops.
t1 = tensor2.new(1,2,3,4,5,6,7,8,9)
print(t1)

st1 = sym_tensor2.new(1,2,3,4,5,6)
print(st1)

-- Test our table print replacement.
mt = {
       __tostring = function(s)
                      return "here's your string"
                    end
     }
obj = {}
setmetatable(obj, mt)

function f(x)
  return x*x
end

tab = {}
tab['a'] = 1
tab['b'] = true
tab['c'] = false
tab['d'] = obj
tab[3.14159265] = "pi"
tab[1] = math.cos
tab[2] = f
tab[3] = 'stringy'
tab[true] = 'true'
tab['tab'] = {a=1, b=2}
tab[obj] = obj
print(tab)
